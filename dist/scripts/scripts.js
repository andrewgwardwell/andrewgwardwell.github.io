"use strict";angular.module("berkleeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","datamaps","checklist-model"]).constant("_",window._).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("berkleeApp").service("programDataService",["$http",function(a){var b=null,c=a.get("scripts/data/berklee_MOCK_DATA_2.json").then(function(a){return b=a.data},function(a){return console.log("error"),a});return{promise:c,data:b}}]),angular.module("berkleeApp").service("mapOptions",["_",function(a){var b=function(b){var c={},d=b;return angular.forEach(d,function(b){b.countries&&angular.forEach(b.countries,function(b){var d=b.info.location,e=b.info.sub_location;c[d]&&c[d].subloc.length>0?c[d].subloc=a.union(c[d].subloc,e):(null==e&&(e=[]),c[d]={subloc:e,fillKey:"def"})})}),c};return{getData:b,opts:{scope:"world",responsive:!0,projection:"mercator",staticGeoData:!0,options:{legendHeight:60},geographyConfig:{highlighBorderColor:"#000",highlighBorderWidth:2,highlightOnHover:!1,highlightFillColor:"#900",borderColor:"#000",popupTemplate:function(a,b){return null!=b?['<div class="hoverinfo">'+a.properties.name+"</div>"].join(""):void 0}},fills:{Sel:"#900",def:"#aaa",defaultFill:"#fff"}}}}]),angular.module("berkleeApp").controller("filterCtrl",["$scope","mapOptions","programDataService","_",function(a,b,c,d){this.search={},a.checkedTypes=[],a.locations=[],a.filters=[],a.filAct=!1,a.locAct=!1,a.openf=!1,a.options={time:[],degree:[],type:[]},a.locationOpen=!1,a.typeOpen=!1,a.init=function(){c.promise.then(function(c){b.opts.data=b.getData(c),a.data=c,a.initProgList(c),a.mapObject=b.opts})},a.filterClick=function(b){"filter"==b&&(a.openTypes(),a.locAct=!1,a.filAct=!a.filAct),"loc"==b&&(a.openLocations(),a.filAct=!1,a.locAct=!a.locAct)},a.initProgList=function(b){var c={time:[],interest:[],department:[],types:[]};angular.forEach(b,function(b){c=a.returnValues(c,b)}),a.options={Time:d.filter(c.time,function(a){return"undefined"!=typeof a&&null!=a}),Department:d.filter(c.department,function(a){return"undefined"!=typeof a&&null!=a}),Interest:d.filter(c.interest,function(a){return"undefined"!=typeof a&&null!=a&&""!=a}),Types:d.filter(c.types,function(a){return"undefined"!=typeof a&&null!=a})}},a.returnValues=function(a,b){a.time=d.uniq(a.time.concat(b.time)),a.interest=d.uniq(a.interest.concat(b.interest)),a.department=d.uniq(a.department.concat(b.department)),a.types=d.uniq(a.types.concat(b.types));var c=a;return c},a.filterState=function(){var b="";return(a.typeOpen||a.locationOpen)&&(b+="open ",a.typeOpen&&(b+="type-open"),a.locationOpen&&(b+="location-open")),b},a.updateActiveGeography=function(b){b.id==a.code?(a.mapObject.data[a.code].fillKey="def",a.code=""):(a.code=b.id,angular.forEach(a.mapObject.data,function(b,c){a.mapObject.data[c].fillKey="def"}),a.mapObject.data[a.code].fillKey="Sel"),a.setFilters(!0)},a.removeFilter=function(b){a.checkedTypes=d.without(a.checkedTypes,b),a.filters=d.without(a.filters,b)},a.isChecked=function(b){return d.contains(a.checkedTypes,b)},a.setFilters=function(b){a.filters=[];var c=[];""!=a.code&&"undefined"!=typeof a.code&&c.push(a.code),a.checkedTypes.length>0&&(c=d.union(c,a.checkedTypes)),a.filters=c,b&&a.$apply()},a.openTypes=function(){a.typeOpen?(a.typeOpen=!1,a.openf=!1):(a.typeOpen=!0,a.locationOpen=!1,a.openf=!0)},a.openLocations=function(b){a.locationOpen?(a.locationOpen=!1,a.openf=!1):(a.typeOpen=!1,a.locationOpen=!0,a.openf=!0)},a.init()}]),angular.module("berkleeApp").directive("progTiles",["$rootScope",function(a){return{restrict:"E",templateUrl:"scripts/directives/templates/progTiles.html",controllerAs:"vm",scope:{filters:"=",search:"=",data:"=",openf:"="},controller:["$scope",function(a){a.init=function(){},a.openFilters=function(){return a.openf},a.evaluateFilters=function(b,c,d){var e,f;if(d){var g=b.title.toLowerCase(),h=g.indexOf(d.toLowerCase());if(0!=h)return"gone";e=!0}else e=!0;if(c.length>0){var i=0,j=a.cleanLoc(b.countries),k=_.map(_.union(b.types,b.time,b.department,b.interest,j),function(a){return a.toLowerCase()});angular.forEach(c,function(a){if("undefined"!=typeof a){var b=_.indexOf(k,a.toLowerCase());b>=0?i++:i}}),i>0&&(f=!0)}else f=!0;return e&&f?"":"gone"},a.cleanLoc=function(a){var b=[];return angular.forEach(a,function(a,c){b.push(a.info.location)}),b},a.init()}]}}]),angular.module("berkleeApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("berkleeApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);